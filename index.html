<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1 EXORA - Memory Archives v3.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&family=Permanent+Marker&display=swap" rel="stylesheet">
    <style>
        :root {
            --ease-out-quint: cubic-bezier(0.22, 1, 0.36, 1);
            --glow-color-1: #ff00de; --glow-color-2: #00aeff; --text-color: #e0e0e0;
        }
        body {
            margin: 0; background-color: #0d0d0d;
            font-family: 'Roboto', 'Helvetica Neue', sans-serif;
            overflow-x: hidden; position: relative;
            transition: background 1.5s ease; color: var(--text-color);
        }
        canvas#cosmic-canvas { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0; transition: opacity 1.5s ease; }
        body.cosmic-mode canvas#cosmic-canvas { opacity: 1; }

        /* Entry Screen */
        #entry-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 1000; cursor: pointer; background: #000;
            transition: opacity 2s var(--ease-out-quint);
        }
        #entry-text { font-family: 'Orbitron', monospace; font-size: clamp(3rem, 15vw, 8rem); color: #fff; text-shadow: 0 0 10px var(--glow-color-2), 0 0 20px var(--glow-color-2); }
        #entry-text .cursor { display: inline-block; background-color: #fff; margin-left: 10px; width: 20px; animation: blink 1s step-end infinite; }
        @keyframes blink { from, to { background-color: transparent } 50% { background-color: #fff; } }
        #entry-subtext { font-family: 'Roboto', sans-serif; font-size: 1rem; color: var(--glow-color-1); margin-top: 20px; letter-spacing: 4px; text-transform: uppercase; opacity: 0; animation: fade-in 2s 2.5s forwards; }
        @keyframes fade-in { to { opacity: 1; } }

        /* Main Content & Title */
        #content { display: none; flex-direction: column; align-items: center; padding: 100px 20px 40px 20px; position: relative; z-index: 10; }
        #log-container { text-align: center; margin-bottom: 20px; }
        #main-title { color: #fff; font-size: clamp(2.5rem, 10vw, 5rem); font-family: 'Permanent Marker', cursive; text-shadow: 0 0 10px rgba(255,255,255,0.7); position: relative; cursor: pointer; transition: transform 0.3s, text-shadow 0.3s; }
        #main-title:hover { transform: scale(1.05); text-shadow: 0 0 20px var(--glow-color-1); }
        #logbook-panel { max-width: 800px; margin: 20px auto; border-left: 3px solid var(--glow-color-2); padding: 0 20px; font-family: 'Orbitron', monospace; text-align: left; height: 0; opacity: 0; overflow: hidden; transition: all 1s var(--ease-out-quint); position: relative; }
        #logbook-panel.visible { height: 160px; opacity: 1; padding-top: 10px; }
        #log-text .cursor { display: inline-block; background-color: #fff; width: 10px; animation: blink 1s step-end infinite; }
        #log-nav { position: absolute; bottom: 10px; right: 20px; }
        #log-nav button { background: none; border: 1px solid #fff; color: #fff; padding: 5px 10px; cursor: pointer; font-family: 'Orbitron'; transition: all 0.3s; }
        #log-nav button:hover { background: #fff; color: #000; }

        /* Memory Card Grid & Yearbook Layout */
        .hall-of-fame { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 60px; width: 100%; max-width: 1600px; margin-top: 50px; perspective: 2500px; transition: all 0.8s var(--ease-out-quint); }
        body.yearbook-mode .hall-of-fame { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); max-width: 2000px; gap: 40px 80px; padding: 20px; border: 10px solid #333; border-image: linear-gradient(45deg, var(--glow-color-1), var(--glow-color-2)) 1; }
        
        .memory-card-container { transition: opacity 1s, transform 1s; opacity: 0; transform: translateY(50px); perspective: 1500px; }
        .memory-card-container.is-visible { opacity: 1; transform: translateY(0); }
        .memory-card { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 0.8s var(--ease-out-quint); border-radius: 15px; }
        .memory-card.is-flipped { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 15px; overflow: hidden; }
        .card-face.card-back { background: #1a1a1a; transform: rotateY(180deg); display: flex; align-items: center; justify-content: center; }
        .signature { position: absolute; font-family: 'Permanent Marker', cursive; color: #fff; opacity: 0; animation: write-in 1.5s forwards; }
        @keyframes write-in { to { opacity: 1; } }
        
        /* Interactive Card Hover & Shimmer */
        .memory-card-container:hover { transition: transform 0.1s; }
        .shimmer-border { position: absolute; top: -2px; left: -2px; width: calc(100% + 4px); height: calc(100% + 4px); border-radius: 15px; z-index: -1; background: conic-gradient(from 0deg, var(--glow-color-1), var(--glow-color-2), var(--glow-color-1)); opacity: 0; transition: opacity 0.4s ease; animation: spin 4s linear infinite; }
        .memory-card-container:hover .shimmer-border, .memory-card-container.highlight .shimmer-border { opacity: 1; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .memory-card img { display: block; width: 100%; height: 100%; object-fit: cover; }
        .card-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 20px; background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, transparent 100%); opacity: 0; transition: opacity 0.5s var(--ease-out-quint); z-index: 2; pointer-events: none; }
        .memory-card-container:hover .card-overlay { opacity: 1; }
        .card-overlay h3 { margin: 0; font-family: 'Orbitron'; font-size: 1.1rem; }
        
        /* Polaroid Effect */
        .polaroid-effect .card-face.card-front::before { content: ''; position: absolute; inset: 0; background: white; animation: develop-bg 2s 0.5s forwards; }
        .polaroid-effect img { animation: develop-img 2s 0.5s forwards; filter: grayscale(1) contrast(2) brightness(2); }
        @keyframes develop-bg { to { opacity: 0; } }
        @keyframes develop-img { to { filter: grayscale(0) contrast(1) brightness(1); } }

        /* Glitched Card */
        #glitched-card .card-face.card-front::after { content:''; position: absolute; inset: 0; background: url(https://i.giphy.com/media/o7riz3i62I4G4/giphy.webp); opacity: 0.15; animation: static 0.1s linear infinite; }
        @keyframes static { 0%, 100% { background-position: 0 0; } 10% { background-position: -5% -10%; } 20% { background-position: -15% 5%; } 30% { background-position: 7% -25%; } 40% { background-position: 20% 25%; } 50% { background-position: -25% 10%; } 60% { background-position: 15% 5%; } 70% { background-position: 0 15%; } 80% { background-position: 25% 35%; } 90% { background-position: -10% 10%; } }

        /* Modals & UI */
        #image-modal, #settings-panel, #konami-overlay, #puzzle-modal, #video-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px);
            opacity: 0; pointer-events: none; transition: opacity 0.5s var(--ease-out-quint);
            z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .modal.visible { opacity: 1; pointer-events: all; }
        #puzzle-symbols { display: flex; gap: 20px; margin-top: 20px; }
        .symbol { font-size: 3rem; color: var(--glow-color-1); cursor: pointer; transition: all 0.3s; }
        .symbol:hover { transform: scale(1.2); text-shadow: 0 0 20px var(--glow-color-1); }
        #video-player { max-width: 80%; max-height: 80%; border: 2px solid var(--glow-color-2); }
        
        /* Theme-Specific Elements */
        .theme-element { pointer-events: none; opacity: 0; transition: opacity 1.5s ease; position: fixed; z-index: 5;}
        .theme-element.visible { opacity: 1; }
        .sun-ray { position: fixed; top: -50%; left: 0; width: 2px; height: 200%; background: linear-gradient(to bottom, rgba(255,255,224,0) 0%, rgba(255,255,224,0.4) 50%, rgba(255,255,224,0) 100%); transform-origin: 50% 50%; animation: shimmer 5s linear infinite; }
        @keyframes shimmer { 0% { transform: rotate(0deg) scale(1.5); } 100% { transform: rotate(360deg) scale(1.5); } }
        .meteor { position: fixed; height: 2px; border-radius: 50%; background: linear-gradient(to right, white, transparent); animation: meteor-fall 3s linear infinite; }
        @keyframes meteor-fall { from { transform: translateX(100vw) translateY(-10vh); opacity: 1; } to { transform: translateX(-20vw) translateY(30vh); opacity: 0; } }
        #night-owl.sleepy .eye { animation: owl-blink 10s infinite; }
    </style>
</head>
<body>
    <canvas id="cosmic-canvas"></canvas>
    
    <div id="ui-container">
        <button id="audio-toggle" class="ui-button" title="Toggle Music">üîá</button>
        <button id="settings-button" class="ui-button" title="Settings">‚öôÔ∏è</button>
    </div>
    <div id="settings-panel" class="modal">
        <button id="day-mode-button">‚òÄÔ∏è Day Mode</button>
        <button id="night-mode-button">üåô Night Mode</button>
        <button id="cosmic-mode-button">üåå Cosmic Drift</button>
        <button id="nostalgia-mode-button">üéûÔ∏è Nostalgia</button>
        <hr style="width: 80%; border-color: rgba(255,255,255,0.3);">
        <button id="yearbook-toggle">üìñ Toggle Yearbook View</button>
    </div>

    <div id="dust-container" class="theme-element"></div>
    <div id="bird-container" class="theme-element"></div>
    <div id="sun-ray-container" class="theme-element"></div>
    <div id="meteor-container" class="theme-element"></div>
    <div id="night-owl" class="theme-element"><svg viewBox="0 0 100 100"><path d="M50,10 C27.9,10 10,27.9 10,50 C10,72.1 27.9,90 50,90 C72.1,90 90,72.1 90,50 C90,27.9 72.1,10 50,10 Z M35,40 C30.9,40 27.5,43.4 27.5,47.5 C27.5,51.6 30.9,55 35,55 C39.1,55 42.5,51.6 42.5,47.5 C42.5,43.4 39.1,40 35,40 Z M65,40 C60.9,40 57.5,43.4 57.5,47.5 C57.5,51.6 60.9,55 65,55 C69.1,55 72.5,51.6 72.5,47.5 C72.5,43.4 69.1,40 65,40 Z"/><circle class="eye" cx="35" cy="47.5" r="5"/><circle class="eye" cx="65" cy="47.5" r="5"/><path d="M50,65 C45,65 40,70 40,75 L60,75 C60,70 55,65 50,65 Z"/></svg></div>
    
    <div id="entry-screen"><h1 id="entry-text"></h1><p id="entry-subtext">[ Click to Access Memory Archives ]</p></div>
    <div id="image-modal" class="modal"><span class="close-button">&times;</span><img src="" alt="Enlarged Memory" id="modal-image"></div>
    <div id="konami-overlay" class="modal"><h2>SYSTEM OVERRIDE</h2><p>SECRET ARCHIVES UNLOCKED</p></div>
    <div id="puzzle-modal" class="modal"><h2>[ CORRUPTED DATA ]</h2><p>Re-align the temporal sequence to decrypt.</p><div id="puzzle-symbols"></div><span class="close-button">&times;</span></div>
    <div id="video-modal" class="modal"><span class="close-button">&times;</span><video id="video-player" loop controls></video></div>
    
    <main id="content">
        <div id="creator-credit">Archives Curated by Khusairi</div>
        <div id="log-container">
            <h1 id="main-title">Captain's Log</h1>
            <div id="logbook-panel"><p id="log-text"></p><div id="log-nav"><button id="log-next-btn">Next &gt;</button></div></div>
        </div>

        <section class="hall-of-fame">
            <div class="memory-card-container" data-event="first-day"><div class="memory-card"><div class="card-face card-front"><div class="shimmer-border"></div><img src="WhatsApp Image 2025-07-14 at 01.10.25_dd89f7dc.jpg" alt="Class Memory 1"><div class="card-overlay"><h3>Memory Fragment: The beginning...</h3></div></div><div class="card-face card-back"></div></div></div>
            <div class="memory-card-container" data-event="sports-day"><div class="memory-card"><div class="card-face card-front"><div class="shimmer-border"></div><img src="WhatsApp Image 2025-07-14 at 01.10.26_8e5c4210.jpg" alt="Class Memory 2"><div class="card-overlay"><h3>Memory Fragment: Hallway hustle.</h3></div></div><div class="card-face card-back"></div></div></div>
            <div class="memory-card-container" id="glitched-card" data-event="class-project"><div class="memory-card"><div class="card-face card-front"><div class="shimmer-border"></div><img src="WhatsApp Image 2025-07-14 at 01.10.26_bac96392.jpg" alt="Class Memory 3"><div class="card-overlay"><h3>Memory Fragment: &lt;DATA CORRUPTED&gt;</h3></div></div><div class="card-face card-back"></div></div></div>
            <div class="memory-card-container" data-event="canteen"><div class="memory-card"><div class="card-face card-front"><div class="shimmer-border"></div><img src="WhatsApp Image 2025-07-14 at 01.10.25_096bfc5b.jpg" alt="Class Memory 4"><div class="card-overlay"><h3>Memory Fragment: Candid moments.</h3></div></div><div class="card-face card-back"></div></div></div>
            <div class="memory-card-container" data-event="last-day"><div class="memory-card"><div class="card-face card-front"><div class="shimmer-border"></div><img src="WhatsApp Image 2025-07-14 at 01.10.25_4cbf3146.jpg" alt="Class Memory 5"><div class="card-overlay"><h3>Memory Fragment: Unity.</h3></div></div><div class="card-face card-back"></div></div></div>
            <div class="memory-card-container" id="secret-card" style="display:none;" data-event="secret"><div class="memory-card"><div class="card-face card-front"><div class="shimmer-border"></div><img src="https://i.imgur.com/vH9kcN9.jpeg" alt="Secret Class Memory"><div class="card-overlay"><h3>SECRET MEMORY: The one we'll never forget!</h3></div></div><div class="card-face card-back"></div></div></div>
        </section>
        
        <footer id="footer"><p>&copy; 2025 | 1 EXORA Archives - Moments That Last Forever.</p></footer>
    </main>

    <div id="timeline-container">
        <div id="timeline">
            <div class="timeline-event" data-event="first-day"><div class="dot"></div><div class="date">01/2025</div><div class="label">First Day</div></div>
            <div class="timeline-event" data-event="sports-day"><div class="dot"></div><div class="date">04/2025</div><div class="label">Sports Day</div></div>
            <div class="timeline-event" data-event="class-project"><div class="dot"></div><div class="date">07/2025</div><div class="label">Project</div></div>
            <div class="timeline-event" data-event="canteen"><div class="dot"></div><div class="date">09/2025</div><div class="label">Canteen</div></div>
            <div class="timeline-event" data-event="last-day"><div class="dot"></div><div class="date">11/2025</div><div class="label">Last Day</div></div>
        </div>
    </div>
    
    <audio id="cosmic-audio" loop><source src="https://cdn.pixabay.com/download/audio/2022/08/04/audio_2dde648d1c.mp3"></audio>
    <audio id="day-audio" loop><source src="https://cdn.pixabay.com/download/audio/2022/08/02/audio_88c1f3633f.mp3"></audio>
    <audio id="night-audio" loop><source src="https://cdn.pixabay.com/download/audio/2022/08/27/audio_5029e0a05a.mp3"></audio>
    <audio id="nostalgia-audio" loop><source src="https://cdn.pixabay.com/download/audio/2022/11/27/audio_249a5f5532.mp3"></audio>
    <audio id="click-audio"><source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_731081a251.mp3"></audio>
    <audio id="secret-audio"><source src="https://cdn.pixabay.com/download/audio/2022/03/08/audio_97116892e3.mp3"></audio>
    <audio id="flip-audio"><source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_b6294b40a3.mp3"></audio>
    <audio id="puzzle-success"><source src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_e5e8f3b89e.mp3"></audio>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const body = document.body;
        const entryScreen = document.getElementById('entry-screen');
        const content = document.getElementById('content');
        
        const audios = {
            cosmic: document.getElementById('cosmic-audio'), day: document.getElementById('day-audio'),
            night: document.getElementById('night-audio'), nostalgia: document.getElementById('nostalgia-audio'),
            click: document.getElementById('click-audio'), secret: document.getElementById('secret-audio'),
            flip: document.getElementById('flip-audio'), success: document.getElementById('puzzle-success')
        };
        let isMuted = true, currentAudio = null;
        Object.values(audios).forEach(a => { a.volume = 0.5; });

        function typeText(element, text, i, onComplete) {
            if (i < text.length) {
                element.innerHTML = text.substring(0, i + 1) + '<span class="cursor"></span>';
                setTimeout(() => typeText(element, text, i + 1, onComplete), 50);
            } else {
                if (element.querySelector('.cursor')) setTimeout(() => { element.querySelector('.cursor').style.display = 'none'; }, 1000);
                if (onComplete) onComplete();
            }
        }
        typeText(document.getElementById('entry-text'), "1 EXORA", 0);

        entryScreen.addEventListener('click', () => {
            entryScreen.style.opacity = '0';
            entryScreen.style.pointerEvents = 'none';
            setTimeout(() => {
                content.style.display = 'flex';
                document.querySelectorAll('.memory-card-container').forEach((card, index) => {
                   if(card.id !== 'secret-card') setTimeout(() => card.classList.add('is-visible'), index * 150);
                });
                document.getElementById('nostalgia-mode-button').click();
            }, 1500);
        }, { once: true });
        
        // Card Interaction (3D, Flip, Modal)
        document.querySelectorAll('.memory-card-container').forEach(container => {
            const card = container.querySelector('.memory-card');
            container.addEventListener('mousemove', e => {
                if (card.classList.contains('is-flipped')) return;
                const rect = container.getBoundingClientRect();
                const rotateY = -15 * ((e.clientX - rect.left - rect.width / 2) / rect.width);
                const rotateX = 15 * ((e.clientY - rect.top - rect.height / 2) / rect.height);
                container.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;
            });
            container.addEventListener('mouseleave', () => { container.style.transform = 'rotateX(0) rotateY(0) scale3d(1, 1, 1)'; });
            container.addEventListener('click', () => {
                if (container.id === 'glitched-card') {
                    openPuzzle();
                    return;
                }
                if (body.classList.contains('yearbook-mode')) {
                    if (!card.classList.contains('is-flipped')) {
                        card.classList.add('is-flipped');
                        if (!isMuted) audios.flip.play();
                        addSignatures(card.querySelector('.card-back'));
                    } else {
                         openImageModal(card.querySelector('img').src);
                    }
                } else {
                    openImageModal(card.querySelector('img').src);
                }
            });
        });

        function openImageModal(src) {
            if (!isMuted) audios.click.play();
            document.getElementById('modal-image').src = src;
            document.getElementById('image-modal').classList.add('visible');
        }
        
        function addSignatures(back) {
            if(back.hasChildNodes()) return;
            const signatures = ['Khusairi', 'Best Class!', '1 EXORA 2025', 'Good Times', 'Never Forget'];
            signatures.forEach((text, i) => {
                const sig = document.createElement('span');
                sig.className = 'signature';
                sig.textContent = text;
                sig.style.cssText = `top:${15+i*18}%; left:${10 + (i%2)*40}%; transform: rotate(${Math.random()*20-10}deg); animation-delay:${i*0.2}s`;
                back.appendChild(sig);
            });
        }
        
        // --- Settings & Themes ---
        const themeFunctions = {
            day: () => createSunRays(3),
            night: () => { document.getElementById('night-owl').classList.add('visible'); createMeteors(3); checkTimeForOwl(); },
            cosmic: () => {},
            nostalgia: () => { createDust(20); document.querySelectorAll('.memory-card-container').forEach(c => c.classList.add('polaroid-effect')); }
        };
        document.getElementById('settings-button').addEventListener('click', () => { document.getElementById('settings-panel').classList.toggle('active'); });
        document.querySelectorAll('#settings-panel button[id$="-mode-button"]').forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.id.replace('-mode-button', '');
                body.className = theme + (body.classList.contains('yearbook-mode') ? ' yearbook-mode' : '');
                document.querySelectorAll('.memory-card-container').forEach(c => c.classList.remove('polaroid-effect'));
                hideAllThemeElements();
                if(themeFunctions[theme]) themeFunctions[theme]();
                document.getElementById('settings-panel').classList.remove('active');
                playThemeAudio(theme);
            });
        });
        document.getElementById('yearbook-toggle').addEventListener('click', () => {
            body.classList.toggle('yearbook-mode');
            document.querySelectorAll('.memory-card.is-flipped').forEach(c => c.classList.remove('is-flipped'));
        });
        
        function checkTimeForOwl() {
            const hour = new Date().getHours();
            if (hour >= 22 || hour < 6) document.getElementById('night-owl').classList.add('sleepy');
        }

        // Dynamic Theme Elements
        function hideAllThemeElements() { document.querySelectorAll('.theme-element').forEach(el => { el.classList.remove('visible'); el.innerHTML = ''; }); }
        function createDust(c) { createDynamicElements('dust-container', 'dust-particle', c, i => `width:${Math.random()*4+1}px;height:${Math.random()*4+1}px;--x-start:${Math.random()*100}vw;--x-end:${Math.random()*100}vw;animation-duration:${Math.random()*15+10}s;animation-delay:${Math.random()*10}s;`); }
        function createSunRays(c) { createDynamicElements('sun-ray-container', 'sun-ray', c, i => `transform: rotate(${i*(360/c)}deg) scale(1.5); animation-delay:${i*0.5}s;`); }
        function createMeteors(c) { createDynamicElements('meteor-container', 'meteor', c, i => `top:${Math.random()*100}vh; animation-duration:${Math.random()*2+1}s; animation-delay:${Math.random()*3}s;`); }
        function createDynamicElements(containerId, className, count, styleFunc) {
            const container = document.getElementById(containerId); container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const el = document.createElement('div'); el.className = className;
                if (styleFunc) el.style.cssText = styleFunc(i);
                container.appendChild(el);
            } container.classList.add('visible');
        }

        // Audio Logic
        function playThemeAudio(theme) {
            if (currentAudio) currentAudio.pause();
            currentAudio = audios[theme];
            if (!isMuted && currentAudio) currentAudio.play().catch(e => {});
        }
        document.getElementById('audio-toggle').addEventListener('click', (e) => {
            isMuted = !isMuted; e.currentTarget.textContent = isMuted ? 'üîá' : 'üîä';
            Object.values(audios).forEach(audio => audio.muted = isMuted);
            if (!isMuted && currentAudio) currentAudio.play().catch(err => {}); else if (currentAudio) currentAudio.pause();
        });
        
        // Captain's Log
        const logEntries = ["Stardate 2025. The journey of the 1-Exora crew has been logged...", "Each photo a star, each memory a constellation...", "This is our legacy. Preserved for all time."];
        let currentLogIndex = 0;
        document.getElementById('log-container').addEventListener('click', (e) => {
            if(e.target.id !== 'log-next-btn') {
                 document.getElementById('logbook-panel').classList.toggle('visible');
                 typeText(document.getElementById('log-text'), logEntries[currentLogIndex], 0);
            }
        });
        document.getElementById('log-next-btn').addEventListener('click', () => {
            currentLogIndex = (currentLogIndex + 1) % logEntries.length;
            typeText(document.getElementById('log-text'), logEntries[currentLogIndex], 0);
        });

        // Puzzle Logic
        const puzzleSolution = ['01', '04', '07', '09', '11'];
        let playerInput = [];
        function openPuzzle() {
            const puzzleModal = document.getElementById('puzzle-modal');
            const symbolsContainer = document.getElementById('puzzle-symbols');
            symbolsContainer.innerHTML = '';
            playerInput = [];
            const symbols = ['01', '04', '07', '09', '11', '12', '03'].sort(() => 0.5 - Math.random());
            symbols.forEach(s => {
                const el = document.createElement('div');
                el.className = 'symbol';
                el.textContent = `[${s}]`;
                el.onclick = () => {
                    playerInput.push(s);
                    el.style.color = 'var(--glow-color-2)';
                    if (playerInput.length === puzzleSolution.length) checkPuzzle();
                };
                symbolsContainer.appendChild(el);
            });
            puzzleModal.classList.add('visible');
        }
        function checkPuzzle() {
            if (JSON.stringify(playerInput) === JSON.stringify(puzzleSolution)) {
                if(!isMuted) audios.success.play();
                document.getElementById('puzzle-modal').classList.remove('visible');
                const videoModal = document.getElementById('video-modal');
                const player = document.getElementById('video-player');
                player.src = "https://i.imgur.com/IsOC12s.mp4"; // Placeholder video
                videoModal.classList.add('visible');
                player.play();
            } else {
                playerInput = [];
                const symbols = document.querySelectorAll('.symbol');
                symbols.forEach(s => s.style.color = 'var(--glow-color-1)');
                symbols[0].parentElement.parentElement.style.animation = 'shake 0.5s';
                setTimeout(()=> symbols[0].parentElement.parentElement.style.animation = '', 500);
            }
        }
        
        // Generic Modal Closer & Secrets
        document.querySelectorAll('.close-button').forEach(btn => btn.addEventListener('click', (e) => e.target.closest('.modal').classList.remove('visible')));
        document.getElementById('footer').addEventListener('click', () => { if(document.getElementById('secret-card').style.display === 'none') document.getElementById('secret-card').style.display = 'block'; });
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a']; let konamiIndex = 0;
        document.addEventListener('keydown', e => {
            if (e.key !== konamiCode[konamiIndex++]) { konamiIndex = 0; return; }
            if (konamiIndex === konamiCode.length) {
                document.getElementById('konami-overlay').classList.add('visible');
                if(!isMuted) audios.secret.play();
                setTimeout(() => document.getElementById('konami-overlay').classList.remove('visible'), 3000);
                konamiIndex = 0;
            }
        });
    });
    </script>
</body>
</html>
